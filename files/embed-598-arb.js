!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=54)}([function(e,t){var n=e.exports={version:"2.5.6"};"number"==typeof __e&&(__e=n)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e),this._handlers={}}return o(e,[{key:"on",value:function(e,t){this._handlers[e]=this._handlers[e]||[],this._handlers[e].push(t)}},{key:"emit",value:function(e,t){var n=this._handlers[e];n&&n.forEach(function(e){return e(t)})}},{key:"off",value:function(e,t){var n=this._handlers[e];if(n)for(var r=void 0;(r=n.indexOf(t))>-1;)n.splice(r,1)}},{key:"removeListeners",value:function(e){e?this._handlers[e]={}:this._handlers={}}}]),e}();t.a=i},function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"f",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return a}),n.d(t,"e",function(){return c});var r={CREATED:"created",DESTROYED:"destroyed",CLOSED:"closed",MESSAGE_RECEIVED:"messageReceived",MESSAGE_SENT:"messageSent",CONFIG_UPDATED:"configUpdated",STATE_CHANGED:"stateChanged",FIRST_TIME_USER:"newUser"},o=Object.values(r),i={FULLSCREEN:"fullscreen",SIDEBAR:"sidebar",POPUP:"popup"},s=Object.values(i),a=["mode","popupWidth","popupHeight","headerText","customPromptMessage","newChat","color","botIcon","allowBackgroundScroll","metadata","externalUserId","standalone","botId"],c={CONFIG:"fxo-messenger-config",REQUEST_CONFIG:"fxo-messenger-config-request",CLOSE:"fxo-messenger-close",DESTROY:"fxo-messenger-destroy",SEND_MESSAGE:"fxo-messenger-send-message",STATE_UPDATE:"fxo-messenger-state-change",MESSAGE_RECEIVED:"fxo-messenger-message-received",MESSAGE_SENT:"fxo-messenger-message-sent",CONFIG_UPDATED:"fxo-messenger-config-updated",VIEW_MODE_CHANGED:"fxo-messenger-view-mode-updated",FIRST_TIME_USER:"fxo-messenger-new-user",CLEAR_HISTORY:"fxo-messenger-clear-history",FORGET_USER:"fxo-forget-user"}},function(e,t,n){e.exports=!n(5)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(12),o=n(8);e.exports=function(e){return r(o(e))}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(1),o=n(0),i=n(11),s=n(39),a=n(28),c=function(e,t,n){var u,f,l,d,h=e&c.F,p=e&c.G,g=e&c.S,m=e&c.P,v=e&c.B,y=p?r:g?r[t]||(r[t]={}):(r[t]||{}).prototype,b=p?o:o[t]||(o[t]={}),w=b.prototype||(b.prototype={});p&&(n=t);for(u in n)f=!h&&y&&void 0!==y[u],l=(f?y:n)[u],d=v&&f?a(l,r):m&&"function"==typeof l?a(Function.call,l):l,y&&s(y,u,l,e&c.U),b[u]!=l&&i(b,u,d),m&&w[u]!=l&&(w[u]=l)};r.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(34),o=n(38);e.exports=n(4)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(27);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(36),o=n(30);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){"use strict";n(22),n(23)},function(e,t,n){"use strict";function r(e){var t={},n=e.indexOf("?");return n>-1&&(t=e.slice(n+1).split("&").reduce(function(e,t){var n=t.split("=");return 2===n.length&&(e[n[0]]=n[1]),e},{})),t}t.a=r},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return f.a.reduce(function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t},{})}function c(e,t){return void 0===e||(t?t(e):e.length>0)}var u=n(2),f=n(3),l=n(21),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=new l.a,p=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.EVENT_NAMES.forEach(function(t){h.on(t,function(n){e.emit(t,n)})}),e}return s(t,e),d(t,[{key:"sendMessage",value:function(e,t){if(!e)throw new Error("The message cannot be blank.");return h.sendMessage(e,t||{})}},{key:"setConfig",value:function(e){var t=this;e=a(e);var n=c(e.mode,function(e){return t.MODES.indexOf(e)>-1}),r=c(e.headerText),o=c(e.customPromptMessage),i=c(e.color),s=c(e.botIcon),u=c(e.standalone,function(e){return!0===e}),f=c(e.allowBackgroundScroll,function(e){return!0===e}),l=c(e.botId),d=c(e.metadata,function(e){return e});return!!(n&&r&&i&&s&&u&&l&&f&&d&&o)&&(h.setConfig(e),!0)}},{key:"getState",value:function(){return h.getInstanceState()}},{key:"create",value:function(){h.createInstance()}},{key:"destroy",value:function(){return h.destroyCurrent()}},{key:"clear",value:function(){return h.clearCurrent()}},{key:"forget",value:function(){return h.forget()}},{key:"toggle",value:function(){return h.toggleCurrentState()}}]),t}(u.a);t.a=p;var g=[].concat(r(f.b));p.prototype.MODES=[].concat(r(f.c)),p.prototype.EVENT_NAMES=g,g.forEach(function(e){p.prototype["on"+(e[0].toUpperCase()+e.slice(1))]=function(t){t&&this.on(e,t)},p.prototype["off"+(e[0].toUpperCase()+e.slice(1))]=function(t){t&&this.off(e,t)}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(2),a=n(3),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.config=e,n.state="loading",n._eventHandler=n._processPostMessageCommands.bind(n),n._addMessenger(),n._addPostMessageListener(),n}return i(t,e),c(t,[{key:"destroy",value:function(){this.removeListeners(),this._removePostMessageListener(),this._removeMessenger()}},{key:"setConfig",value:function(e){this.config=e,this._sendPostMessageCommand(a.e.CONFIG,{config:e}),this._updateViewMode()}},{key:"getState",value:function(){var e=this.config,t=e.color,n=e.fullscreen,r=e.headerText,o=e.botIcon,i=e.testConsole;return{state:this.state,color:t,fullscreen:n,headerText:r,botIcon:o,testConsole:i}}},{key:"sendMessage",value:function(e,t){this._sendPostMessageCommand(a.e.SEND_MESSAGE,{text:e,metadata:t})}},{key:"_sendPostMessageCommand",value:function(e,t){var n=Object.assign({type:e},t);this._iframe.contentWindow.postMessage(n,"*")}},{key:"_processPostMessageCommands",value:function(e){var t=e.data;switch(t.type){case a.e.REQUEST_CONFIG:this.setConfig(this.config);break;case a.e.CLOSE:this.emit(a.d.CLOSED),this.destroy();break;case a.e.STATE_UPDATE:this.state=t.state,this.emit(a.d.STATE_CHANGED,this.state);break;case a.e.MESSAGE_RECEIVED:this.emit(a.d.MESSAGE_RECEIVED,t.message);break;case a.e.MESSAGE_SENT:this.emit(a.d.MESSAGE_SENT,t.message);break;case a.e.CONFIG_UPDATED:this.emit(a.d.CONFIG_UPDATED);break;case a.e.FIRST_TIME_USER:this.emit(a.d.FIRST_TIME_USER)}}},{key:"_addMessenger",value:function(){this._addStylesheet(),this._calcIsFullscreen();var e=this._getWidthAndHeightForMode(),t=e.width,n=e.height,r=this._getWidthAndHeightForContainer(),o=document.createElement("div"),i=document.createElement("iframe");this._element=i,Object.assign(i,{id:"fxo-messenger-iframe",className:"fxo-messenger-iframe",scrolling:"no",width:t,height:n,src:"https://widget.flowxo.com/messenger.html",allowFullscreen:!0}),Object.assign(i.style,{border:"none",position:"fixed",bottom:0,right:0,"background-color":"rgb(249, 249, 251)","z-index":2147483647}),this.config.fullscreen||(Object.assign(o.style,{width:r.width,height:r.height,position:"fixed",right:"0px",bottom:"0px","z-index":"2147483647","box-shadow":"0 1px 6px rgba(17, 54, 84, .04), 0 2px 32px rgba(17, 54, 84, .08)"}),Object.assign(i.style,{"margin-left":"20px"})),o.appendChild(this._iframe);try{this.config.fullscreen&&document.body.classList.add("fxo-messenger-fullscreen"),this.config.allowBackgroundScroll||document.body.classList.add("fxo-messenger-noscroll")}catch(e){console.error("Error adding class to parent body element.",e)}this._containerElement=o,document.body.appendChild(this._container)}},{key:"_getWidthAndHeightForMode",value:function(){var e=void 0,t="100%";switch(this.config.mode){case a.f.FULLSCREEN:e="100%";break;case a.f.POPUP:e=this.config.popupWidth||400,t=this.config.popupHeight||400;break;default:e=this.config.fullscreen?"100%":this.config.popupWidth||400}return{width:e,height:t}}},{key:"_getWidthAndHeightForContainer",value:function(){var e=void 0,t="100%";switch(this.config.mode){case a.f.FULLSCREEN:e="100%";break;case a.f.POPUP:e=this.config.popupWidth||"400px",t=this.config.popupHeight||"400px";break;default:e=this.config.fullscreen?"100%":this.config.popupWidth||"400px"}return{width:e,height:t}}},{key:"_updateViewMode",value:function(){Object.assign(this._element,this._getWidthAndHeightForMode()),this._sendPostMessageCommand(a.e.VIEW_MODE_CHANGED)}},{key:"_clearHistory",value:function(){this._sendPostMessageCommand(a.e.CLEAR_HISTORY)}},{key:"_forget",value:function(){this._sendPostMessageCommand(a.e.FORGET_USER)}},{key:"_removeMessenger",value:function(){this._sendPostMessageCommand(a.e.DESTROY),document.body.removeChild(this._container),this._removeStylesheet()}},{key:"_addPostMessageListener",value:function(){window.addEventListener("message",this._eventHandler)}},{key:"_removePostMessageListener",value:function(){window.removeEventListener("message",this._eventHandler)}},{key:"_addStylesheet",value:function(){var e=document.createElement("style");this._stylesheet=e,Object.assign(e,{id:"fxo-messenger-styles",type:"text/css"}),document.body.classList.add("fxo-messenger-open"),e.appendChild(document.createTextNode(".fxo-messenger-fullscreen {overflow:hidden;height:100%;width:100%;position:fixed} .fxo-messenger-noscroll {overflow:hidden!important}")),document.head.appendChild(e)}},{key:"_removeStylesheet",value:function(){try{document.body.classList.remove("fxo-messenger-fullscreen"),document.body.classList.remove("fxo-messenger-noscroll"),document.body.classList.remove("fxo-messenger-open")}catch(e){console.error("Error removing class from parent body element.",e)}document.head.removeChild(this._stylesheet)}},{key:"_calcIsFullscreen",value:function(){this.config.fullscreen=window.innerWidth<500}},{key:"state",get:function(){return this._state},set:function(e){this._state=e}},{key:"_container",get:function(){return this._containerElement}},{key:"_iframe",get:function(){return this._element}}]),t}(s.a);t.a=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(2),a=n(3),c=n(20),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"createInstance",value:function(){var e=this;this._removeExistingMessenger()&&console.warn("FxoMessenger:","Found another instance of FxoMessenger. Removing old instance. Installing new one.");var t=new c.a(this.config);return this._messengerInstance=t,t.on(a.d.CLOSED,function(){e._messengerInstance=void 0,e.emit(a.d.DESTROYED)}),a.b.forEach(function(n){t.on(n,function(t){e.emit(n,t)})}),this.emit(a.d.CREATED),!0}},{key:"destroyCurrent",value:function(){return!!this._removeExistingMessenger()}},{key:"clearCurrent",value:function(){var e=this._messengerInstance;e&&e._clearHistory()}},{key:"forget",value:function(){var e=this._messengerInstance;e&&e._forget()}},{key:"toggleCurrentState",value:function(){return!this._removeExistingMessenger()&&this.createInstance()}},{key:"setConfig",value:function(e){this.config=Object.assign(this.config||{},e);var t=this._messengerInstance;t&&t.setConfig(this.config)}},{key:"getInstanceState",value:function(){var e=this._messengerInstance;return e&&e.getState()||{state:"detached"}}},{key:"sendMessage",value:function(e,t){var n=this._messengerInstance;return!!n&&n.sendMessage(e,t||{})}},{key:"_removeExistingMessenger",value:function(){var e=this._messengerInstance;return e&&(e.destroy(),this._messengerInstance=void 0,this.emit(a.d.DESTROYED)),!!e}},{key:"_messengerInstance",get:function(){return this._currentFxoMessenger},set:function(e){this._currentFxoMessenger=e}}]),t}(s.a);t.a=f},function(e,t,n){n(46),e.exports=n(0).Object.assign},function(e,t,n){n(47),e.exports=n(0).Object.values},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(6);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var r=n(7),o=n(43),i=n(42);e.exports=function(e){return function(t,n,s){var a,c=r(t),u=o(c.length),f=i(s,u);if(e&&n!=n){for(;u>f;)if((a=c[f++])!=a)return!0}else for(;u>f;f++)if((e||f in c)&&c[f]===n)return e||f||0;return!e&&-1}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(24);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(6),o=n(1).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){e.exports=!n(4)&&!n(5)(function(){return 7!=Object.defineProperty(n(29)("div"),"a",{get:function(){return 7}}).a})},function(e,t){e.exports=!1},function(e,t,n){"use strict";var r=n(13),o=n(35),i=n(14),s=n(44),a=n(12),c=Object.assign;e.exports=!c||n(5)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=s(e),c=arguments.length,u=1,f=o.f,l=i.f;c>u;)for(var d,h=a(arguments[u++]),p=f?r(h).concat(f(h)):r(h),g=p.length,m=0;g>m;)l.call(h,d=p[m++])&&(n[d]=h[d]);return n}:c},function(e,t,n){var r=n(25),o=n(31),i=n(45),s=Object.defineProperty;t.f=n(4)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(10),o=n(7),i=n(26)(!1),s=n(40)("IE_PROTO");e.exports=function(e,t){var n,a=o(e),c=0,u=[];for(n in a)n!=s&&r(a,n)&&u.push(n);for(;t.length>c;)r(a,n=t[c++])&&(~i(u,n)||u.push(n));return u}},function(e,t,n){var r=n(13),o=n(7),i=n(14).f;e.exports=function(e){return function(t){for(var n,s=o(t),a=r(s),c=a.length,u=0,f=[];c>u;)i.call(s,n=a[u++])&&f.push(e?[n,s[n]]:s[n]);return f}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(1),o=n(11),i=n(10),s=n(16)("src"),a=Function.toString,c=(""+a).split("toString");n(0).inspectSource=function(e){return a.call(e)},(e.exports=function(e,t,n,a){var u="function"==typeof n;u&&(i(n,"name")||o(n,"name",t)),e[t]!==n&&(u&&(i(n,s)||o(n,s,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:a?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||a.call(this)})},function(e,t,n){var r=n(41)("keys"),o=n(16);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t,n){var r=n(0),o=n(1),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(32)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(15),o=Math.max,i=Math.min;e.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},function(e,t,n){var r=n(15),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(8);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(6);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(9);r(r.S+r.F,"Object",{assign:n(33)})},function(e,t,n){var r=n(9),o=n(37)(!1);r(r.S,"Object",{values:function(e){return o(e)}})},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),o=n(51),i=n(18),s=n(50),a=document.querySelector("script[data-fxo-widget]");if(!a)throw new Error("Script was not added correctly. Ensure the script contains data under the `data-fxo-widget` attribute.");var c=n.i(s.a)(a.getAttribute("data-fxo-widget"));if(!c)throw new Error("Widget data was invalid.");if(c.web&&c.web.data){var u=n.i(s.a)(c.web.data);if(!u)throw new Error("Messenger data was invalid.");c.web=u}var f=new o.a(c);if(c.web){var l=window.FxoMessenger=new r.a;l.setConfig({botId:c.web.botId,allowBackgroundScroll:c.allowBackgroundScroll}),f.on("revealWebMessenger",function(){return l.create()})}c.web&&f.render(),window.FxoWidget=f.getPublicAPI();var d=n.i(i.a)(a.src),h=d.callback||c.callback;h&&window[h]&&window[h]()},function(e,t,n){"use strict";function r(e){try{return JSON.parse(o.Base64.decode(e))}catch(e){console.warn("Data to decode was invalid:",e)}}t.a=r;var o=n(52);n.n(o)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=document.createTextNode(e),n=document.createElement("div");return n.appendChild(t),n.innerHTML}var a=n(2),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u={key:"web",label:function(e){return e.label||"Web"},enabled:function(e){return!!e.botId},dispatchToParent:"fxo-widget-reveal-web-messenger"},f=["facebook","slack","telegram","sms"],l=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.processMessageFromWidget=n.processMessageFromWidget.bind(n),n.processDocumentClick=n.processDocumentClick.bind(n),n.config={zIndex:2147483647};var i=void 0;if(e.hasOwnProperty(u.key)){var a=e[u.key],c="function"==typeof u.label?u.label(a):u.label;u.enabled(a)&&(Object.assign(a,{key:u.key,label:c,labelWidth:u.labelWidth||10*c.length,popoverContent:u.popoverTemplate&&u.popoverTemplate(a),dispatchToParent:u.dispatchToParent}),i=a)}if(i)n.config.channel=i;else{f.some(function(t){return e.hasOwnProperty(t)})&&console.warn("FlowXO - Web widget for displaying the different bot channels has been discontinued.")}return["theme","revealAfterSecs","welcomeRevealAfterSecs","welcomeHideAfterSecs","hideWelcomeForDays","userId","userPaidPlan","zIndex"].forEach(function(t){e.hasOwnProperty(t)&&(n.config[t]=e[t])}),["welcomeText"].forEach(function(t){e.hasOwnProperty(t)&&(n.config[t]=s(e[t]))}),n}return i(t,e),c(t,[{key:"render",value:function(){if(!this.iframe){var e="\n        .fxo-widget-iframe {\n          border: none;\n          display: block;\n          position: fixed;\n          bottom: 15px;\n          right: 0;\n          z-index: "+this.config.zIndex+";\n        }\n        @media (min-width: 769px) {\n          .fxo-widget-iframe {\n            right: 10px;\n          }\n        }\n        @media (min-width: 1025px) {\n          .fxo-widget-iframe {\n            bottom: 25px;\n            right: 20px;\n          }\n        }\n      ",t=document.createElement("style");t.type="text/css",t.appendChild(document.createTextNode(e)),document.head.appendChild(t),this.iframe=document.createElement("iframe"),this.iframe.id="fxo-widget-iframe",this.iframe.className="fxo-widget-iframe",this.iframe.scrolling="no",this.iframe.width=100,this.iframe.height=100,this.iframe.title="Chatbot",this.iframe.src="https://widget.flowxo.com/widget.html",this.iframe.allowFullscreen=!0,document.body.appendChild(this.iframe),window.addEventListener("message",this.processMessageFromWidget,!1),document.addEventListener("click",this.processDocumentClick,!1)}}},{key:"destroy",value:function(){window.removeEventListener("message",this.processMessageFromWidget,!1),document.removeEventListener("click",this.processDocumentClick,!1),this.sendMessageToWidget("widget:destroy"),document.body.removeChild(this.iframe)}},{key:"processMessageFromWidget",value:function(e){var t=void 0;try{t=JSON.parse(e.data)}catch(e){return}switch(t.action){case"fxo-widget-ready":this.sendMessageToWidget("widget:init",this.config);break;case"fxo-widget-resize":this.iframe&&(this.iframe.width=t.payload.width,this.iframe.height=t.payload.height);break;case"fxo-widget-reveal-web-messenger":this.emit("revealWebMessenger")}}},{key:"sendMessageToWidget",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.iframe&&this.iframe.contentWindow){var n=JSON.stringify({action:e,payload:t});this.iframe.contentWindow.postMessage(n,"*")}}},{key:"processDocumentClick",value:function(e){e.target!==this.iframe&&this.sendMessageToWidget("widget:collapse")}},{key:"getPublicAPI",value:function(){return{destroy:this.destroy.bind(this)}}}]),t}(a.a);t.a=l},function(e,t){!function(n,r){"object"==typeof t&&void 0!==e?e.exports=r(n):"function"==typeof define&&define.amd?define(r):r(n)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:this,function(t){"use strict";var n,r=t.Base64;if(void 0!==e&&e.exports)try{n=require("buffer").Buffer}catch(e){}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(o),s=String.fromCharCode,a=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?s(192|t>>>6)+s(128|63&t):s(224|t>>>12&15)+s(128|t>>>6&63)+s(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return s(240|t>>>18&7)+s(128|t>>>12&63)+s(128|t>>>6&63)+s(128|63&t)},c=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,u=function(e){return e.replace(c,a)},f=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[o.charAt(n>>>18),o.charAt(n>>>12&63),t>=2?"=":o.charAt(n>>>6&63),t>=1?"=":o.charAt(63&n)].join("")},l=t.btoa?function(e){return t.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,f)},d=n?n.from&&Uint8Array&&n.from!==Uint8Array.from?function(e){return(e.constructor===n.constructor?e:n.from(e)).toString("base64")}:function(e){return(e.constructor===n.constructor?e:new n(e)).toString("base64")}:function(e){return l(u(e))},h=function(e,t){return t?d(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):d(String(e))},p=function(e){return h(e,!0)},g=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),m=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return s(55296+(n>>>10))+s(56320+(1023&n));case 3:return s((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return s((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},v=function(e){return e.replace(g,m)},y=function(e){var t=e.length,n=t%4,r=(t>0?i[e.charAt(0)]<<18:0)|(t>1?i[e.charAt(1)]<<12:0)|(t>2?i[e.charAt(2)]<<6:0)|(t>3?i[e.charAt(3)]:0),o=[s(r>>>16),s(r>>>8&255),s(255&r)];return o.length-=[0,0,2,1][n],o.join("")},b=t.atob?function(e){return t.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,y)},w=n?n.from&&Uint8Array&&n.from!==Uint8Array.from?function(e){return(e.constructor===n.constructor?e:n.from(e,"base64")).toString()}:function(e){return(e.constructor===n.constructor?e:new n(e,"base64")).toString()}:function(e){return v(b(e))},_=function(e){return w(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},E=function(){var e=t.Base64;return t.Base64=r,e};if(t.Base64={VERSION:"2.4.5",atob:b,btoa:l,fromBase64:_,toBase64:h,utob:u,encode:h,encodeURI:p,btou:v,decode:_,noConflict:E},"function"==typeof Object.defineProperty){var x=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",x(function(){return _(this)})),Object.defineProperty(String.prototype,"toBase64",x(function(e){return h(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",x(function(){return h(this,!0)}))}}return t.Meteor&&(Base64=t.Base64),void 0!==e&&e.exports?e.exports.Base64=t.Base64:"function"==typeof define&&define.amd&&define([],function(){return t.Base64}),{Base64:t.Base64}})},,function(e,t,n){n(17),e.exports=n(49)}]);
//# sourceMappingURL=embed.js.map